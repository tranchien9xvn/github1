

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="vi" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="vi" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Truyền thông tin &mdash; Tài liệu ROSNV 0.1</title>
  

  
  
  
  

  
  <script type="text/javascript" src="../_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
        <script type="text/javascript" src="../_static/jquery.js"></script>
        <script type="text/javascript" src="../_static/underscore.js"></script>
        <script type="text/javascript" src="../_static/doctools.js"></script>
        <script type="text/javascript" src="../_static/language_data.js"></script>
        <script type="text/javascript" src="../_static/translations.js"></script>
    
    <script type="text/javascript" src="../_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Tìm Kiếm" href="../search.html" />
    <link rel="next" title="Tạo package" href="createpackage.html" />
    <link rel="prev" title="Các khái niệm quan trọng của ROS" href="cacthuatngu.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../index.html" class="icon icon-home"> ROSNV
          

          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul>
<li class="toctree-l1"><a class="reference internal" href="../doc/introduction.html">Robot and ROS</a></li>
<li class="toctree-l1"><a class="reference internal" href="../doc/install.html">Hướng dẫn cài đặt</a></li>
</ul>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="cacthuatngu.html">Các khái niệm quan trọng của ROS</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Truyền thông tin</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#name">Name</a></li>
<li class="toctree-l2"><a class="reference internal" href="#coordinate-transformation-tf">Coordinate Transformation (TF)</a></li>
<li class="toctree-l2"><a class="reference internal" href="#client-library">Client Library</a></li>
<li class="toctree-l2"><a class="reference internal" href="#communication-between-heterogenous-devices">Communication between Heterogenous Devices</a></li>
<li class="toctree-l2"><a class="reference internal" href="#file-system">File System</a></li>
<li class="toctree-l2"><a class="reference internal" href="#build-system">Build System</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="createpackage.html">Tạo package</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../doc2add/ros_commands.html">Ros_commands</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../doc3/URDF-GAZEBO.html">Urdf_gazebo</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../doc4/approach.html">Kiến trúc của ROS</a></li>
<li class="toctree-l1"><a class="reference internal" href="../doc4/architecture.html">Kiến trúc của MoveIt</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../doc5/Move_group.html">Move_group</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../doc6/API.html">API++</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../doc7/Descarte.html">Descarte</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">ROSNV</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html">Docs</a> &raquo;</li>
        
      <li>Truyền thông tin</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../_sources/doc2/tintruyenthong.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="truyen-thong-tin">
<h1>Truyền thông tin<a class="headerlink" href="#truyen-thong-tin" title="Permalink to this headline">¶</a></h1>
<a class="reference internal image-reference" href="../_images/anh2c1.png"><img alt="../_images/anh2c1.png" src="../_images/anh2c1.png" style="width: 400px;" /></a>
<table class="docutils align-center">
<colgroup>
<col style="width: 14%" />
<col style="width: 18%" />
<col style="width: 16%" />
<col style="width: 52%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Kiểu</p></th>
<th class="head"><p>Đặc điểm</p></th>
<th class="head"></th>
<th class="head"><p>Sự miêu tả</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>Topic</p></td>
<td><p>Không đồng bộ</p></td>
<td><p>Một hướng</p></td>
<td><dl class="simple">
<dt>Sử dụng khi trao đổi dữ liệu</dt><dd><p>liên tục</p>
</dd>
</dl>
</td>
</tr>
<tr class="row-odd"><td><p>Service</p></td>
<td><p>Đồng bộ</p></td>
<td><p>Hai hướng</p></td>
<td><dl class="simple">
<dt>Sử dụng khi yêu cầu xử lý thông tin</dt><dd><p>và đáp ứng trạng thái hiện tại</p>
</dd>
</dl>
</td>
</tr>
<tr class="row-even"><td><p>Action</p></td>
<td><p>Không đồng bộ</p></td>
<td><p>Hai hướng</p></td>
<td><dl class="simple">
<dt>Được sử dụng khi rất khó để sử dụng</dt><dd><p>service do thời gian đáp ứng lâu</p>
</dd>
</dl>
</td>
</tr>
</tbody>
</table>
<ul class="simple">
<li><p>Topic</p></li>
</ul>
<a class="reference internal image-reference" href="../_images/anh2c2.png"><img alt="../_images/anh2c2.png" src="../_images/anh2c2.png" style="width: 400px;" /></a>
<ol class="arabic simple">
<li><p>Node publisher và node subscriber đăng kí message với master. Khi giống nhau chúng kết nối trực tiếp với nhau.</p></li>
<li><p>Chủ đề là một chiều, duy trì kết nối gửi và nhận liên tục.</p></li>
<li><p>Nó phù hợp cho dữ liệu cảm biến.</p></li>
<li><p>Nhiều thuê bao có thể nhận được thông báo từ một nhà xuất bản và ngược lại.</p></li>
</ol>
<ul class="simple">
<li><p>Service</p></li>
</ul>
<a class="reference internal image-reference" href="../_images/anh2c3.png"><img alt="../_images/anh2c3.png" src="../_images/anh2c3.png" style="width: 400px;" /></a>
<ol class="arabic simple">
<li><p>Truyền thông về dịch vụ là một thông tin liên lạc đồng bộ hai chiều giữa service client yêu cầu một dịch vụ
và service server đáp ứng yêu cầu như trong hình trên.</p></li>
<li><p>Khi yêu cầu và phản ứng của các dịch vụ được hoàn thành, kết nối giữa hai nút sẽ bị ngắt kết nối.</p></li>
<li><p>Một dịch vụ thường được sử dụng để chỉ huy một robot thực hiện một hành động hoặc nút cụ thể nhằm thực hiện các sự kiện nhất định với một điều kiện cụ thể.</p></li>
</ol>
<ul class="simple">
<li><p>Action</p></li>
</ul>
<a class="reference internal image-reference" href="../_images/anh2c4.png"><img alt="../_images/anh2c4.png" src="../_images/anh2c4.png" style="width: 400px;" /></a>
<p>Máy khách yêu cầu đến máy chủ một hành động cần một thời gian dài. Máy chủ hành động và thường xuyên gửi những phản hồi về cho máy khách.
Cuối cùng máy chủ báo nhiệm vụ thành công, máy khách tiếp nhận và ngắt kết nối.</p>
<a class="reference internal image-reference" href="../_images/anh2c5.png"><img alt="../_images/anh2c5.png" src="../_images/anh2c5.png" style="width: 300px;" /></a>
<p>Ban đầu các node kết nối với master. master lưu giữ tất cả thông tin của các node. node này sẽ có được lượng thông tin tương đối của node khác thông qua master.
Sau đó mỗi node kết nối trực tiếp với nhau để thực hiện truyền thông điệp.</p>
<ul class="simple">
<li><p>Parameter</p></li>
<li><p>Message Communication Flow</p></li>
</ul>
<ol class="arabic simple">
<li><p>chạy Master</p></li>
</ol>
<blockquote>
<div><p>Master phải được chạy đầu tiên. Các master trong ROS được điều hành bằng cách sử dụng lệnh 'roscore'
và chạy máy chủ với XmlRpc. Các master đăng ký tên của các nút, các chủ đề, dịch vụ, hành động, các loại tin nhắn,
địa chỉ URI và cổng cho các kết nối node-to-node, và chuyển tiếp thông tin đến các nút khác theo yêu cầu:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$roscore
</pre></div>
</div>
</div></blockquote>
<a class="reference internal image-reference" href="../_images/anh2c6.png"><img alt="../_images/anh2c6.png" src="../_images/anh2c6.png" style="width: 300px;" /></a>
<ol class="arabic simple" start="2">
<li><p>Chạy Node Subscriber</p></li>
</ol>
<blockquote>
<div><p>Chạy node subscriber bằng lệnh  rosrun hoặc roslaunch. Node subscriber đăng kí tên node của nó, tên topic, loại message, địa chỉ URI,
và cổng với master khi nó chạy. Các master và node giao sử dụng XmlRpc.</p>
</div></blockquote>
<a class="reference internal image-reference" href="../_images/anh2c7.png"><img alt="../_images/anh2c7.png" src="../_images/anh2c7.png" style="width: 300px;" /></a>
<ol class="arabic simple" start="3">
<li><p>Chạy Node Publisher</p></li>
</ol>
<blockquote>
<div><p>Để chạy node publisher chúng ta cũng sử dụng lệnh 'rosrun' hoặc 'roslaunch' như node subscriber.
Node publisher đăng ký tên node, tên topic, loại message, địa chỉ và cổng URI của nó với các master.
Các master và node giao sử dụng XmlRpc.</p>
</div></blockquote>
<a class="reference internal image-reference" href="../_images/anh2c8.png"><img alt="../_images/anh2c8.png" src="../_images/anh2c8.png" style="width: 300px;" /></a>
<ol class="arabic simple" start="4">
<li><p>Cung cấp thông tin publisher cho subscriber</p></li>
</ol>
<blockquote>
<div><p>Các master phân phối thông tin như tên của publisher, tên topic, loại message, địa chỉ URI và số cổng của publisher
cho các subscriber mà muốn kết nối đến node publisher. Các master và node giao sử dụng XmlRpc.</p>
</div></blockquote>
<a class="reference internal image-reference" href="../_images/anh2c9.png"><img alt="../_images/anh2c9.png" src="../_images/anh2c9.png" style="width: 300px;" /></a>
<ol class="arabic simple" start="5">
<li><p>Yêu cầu kết nối từ Node Subscriber</p></li>
</ol>
<blockquote>
<div><p>node subscriber yêu cầu một kết nối trực tiếp đến node publisher dựa trên thông tin subscriber nhận được từ các master.
Trong thủ tục yêu cầu, node subscriber truyền thông tin đến node publisher như
tên node subscriber, tên topic, và các message. node publisher và các node subscriber sử dụng XmlRpc.</p>
</div></blockquote>
<a class="reference internal image-reference" href="../_images/anh2c10.png"><img alt="../_images/anh2c10.png" src="../_images/anh2c10.png" style="width: 300px;" /></a>
<ol class="arabic simple" start="6">
<li><p>Kết nối Phản hồi từ Node Publisher</p></li>
</ol>
<blockquote>
<div><p>Node publisher gửi các địa chỉ URI và số cổng của server TCP của nó để đáp ứng với yêu cầu kết nối từ node subscriber. Nút nhà xuất bản và các nút giao thuê bao sử dụng XmlRpc.</p>
</div></blockquote>
<a class="reference internal image-reference" href="../_images/anh2c11.png"><img alt="../_images/anh2c11.png" src="../_images/anh2c11.png" style="width: 300px;" /></a>
<ol class="arabic simple" start="7">
<li><p>kết nối TCPROS</p></li>
</ol>
<blockquote>
<div><p>Node subscriber tạo ra một client cho các node publisher sử dụng TCPROS, và kết nối đến node publisher.
Tại thời điểm này, thông tin liên lạc giữa các nút sử dụng giao thức TCP / IP dựa trên giao thức gọi là TCPROS.</p>
</div></blockquote>
<a class="reference internal image-reference" href="../_images/anh2c12.png"><img alt="../_images/anh2c12.png" src="../_images/anh2c12.png" style="width: 300px;" /></a>
<ol class="arabic simple" start="8">
<li><p>Truyền tin</p></li>
</ol>
<blockquote>
<div><p>node publisher phát đi một message được xác định trước đến node subscriber. Các thông tin liên lạc giữa các nút sử dụng TCPROS.</p>
</div></blockquote>
<a class="reference internal image-reference" href="../_images/anh2c13.png"><img alt="../_images/anh2c13.png" src="../_images/anh2c13.png" style="width: 300px;" /></a>
<p><strong>Service Request and Response</strong></p>
<p>Thủ tục thảo luận ở trên tương ứng với các thông tin liên lạc là Topic. Thông tin liên lạc  topic publish và subscribe các message liên tục,
trừ trường hợp publisher hoặc subscriber bị chấm dứt.</p>
<p>Dịch vụ thì có 2 loại hình thức
* Service Client: Request service and receive response
* Service Server: Receive a service, execute the specified task, and return a response</p>
<p>Kết nối giữa service server and client cũng giống như kết nối TCPROS cho publisher and subscriber được mô tả ở trên.
Khác với topic, các service chấm dứt kết nối sau khi request và response thành công.
Nếu yêu cầu bổ sung là cần thiết, các thủ tục liên quan phải được thực hiện một lần nữa.</p>
<a class="reference internal image-reference" href="../_images/anh2c14.png"><img alt="../_images/anh2c14.png" src="../_images/anh2c14.png" style="width: 300px;" /></a>
<p><strong>Action được thực hiện</strong></p>
<a class="reference internal image-reference" href="../_images/anh2c14.png"><img alt="../_images/anh2c14.png" src="../_images/anh2c14.png" style="width: 300px;" /></a>
<p>Bạn nghĩ nó giống service nhưng thực chất nó giống topic hơn. nếu bạn dùng lệnh runtopic nó sẽ liệt kê ra 5 topic trong đó gồm có: mục tiêu,
trạng thái, hủy bỏ, kết quả, và phản hồi được sử dụng trong action. Kết nối TCPROS cũng tương tự chỉ khác là khi client gửi lệnh hủy bỏ hoặc server gửi kết quả
thì sẽ ngắt kết nối.</p>
<p>Ví dụ về truyền thông tinw</p>
<a class="reference internal image-reference" href="../_images/anh2c14.png"><img alt="../_images/anh2c14.png" src="../_images/anh2c14.png" style="width: 300px;" /></a>
<p><strong>Message</strong></p>
<blockquote>
<div><p>Message là một gói dữ liệu sử dụng để trao đổi dữ liệu giữa các node. Các topic,
service và các action được sử dụng message để giao tiếp. Một thông điệp có thể bao
gồm các kiểu dữ liệu cơ bản như số nguyên, con trỏ động, Boolean cũng có thể là các
mảng 1 chiều, 2 chiều... Hơn nữa, một message có thể chứa những thông điệp khác như
'geometry_msgs / PoseStamped'. Ngoài ra, các tiêu đề 'std_msgs / Tiêu đề' mà thường được
sử dụng trong ROS có thể được bao gồm trong tin nhắn. Các thông điệp này có thể được mô tả
như kiểu trường và tên trường như hình dưới đây:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">fieldtype1</span> <span class="n">fieldname1</span>
<span class="n">fieldtype2</span> <span class="n">fieldname2</span>
<span class="n">fieldtype3</span> <span class="n">fieldname3</span>
</pre></div>
</div>
</div></blockquote>
<p>còn thiếu phần giới thiệu các kiểu dữ liệu</p>
<p>(std_msgs / Header) có một chức vụ gì đó để kiểm tra tin nhắn, đo thời gian truyền...</p>
<p>Có ví dụ là cho rùa di chuyển sẽ được giải thích sau.</p>
<ol class="arabic simple">
<li><p>file.msg</p></li>
</ol>
<blockquote>
<div><p>Là tập tin nhắn đuôi msg sử dụng để trao đổi trong các topic,service, action.
ví dụ tin nhắn 'geometry_msgs' điều khiển chuyển động của con rùa phía trên là một ví dụ. trong nó sẽ khai báo các loại trường và tên trường.</p>
</div></blockquote>
<ol class="arabic simple" start="2">
<li><p>file.srv</p></li>
<li><p>Action file</p></li>
</ol>
<div class="section" id="name">
<h2>Name<a class="headerlink" href="#name" title="Permalink to this headline">¶</a></h2>
</div>
<div class="section" id="coordinate-transformation-tf">
<h2>Coordinate Transformation (TF)<a class="headerlink" href="#coordinate-transformation-tf" title="Permalink to this headline">¶</a></h2>
</div>
<div class="section" id="client-library">
<h2>Client Library<a class="headerlink" href="#client-library" title="Permalink to this headline">¶</a></h2>
</div>
<div class="section" id="communication-between-heterogenous-devices">
<h2>Communication between Heterogenous Devices<a class="headerlink" href="#communication-between-heterogenous-devices" title="Permalink to this headline">¶</a></h2>
</div>
<div class="section" id="file-system">
<h2>File System<a class="headerlink" href="#file-system" title="Permalink to this headline">¶</a></h2>
<ol class="arabic simple">
<li><p>File Configuration</p></li>
<li><p>Installation Folder</p></li>
<li><p>Workspace Folder</p></li>
</ol>
</div>
<div class="section" id="build-system">
<h2>Build System<a class="headerlink" href="#build-system" title="Permalink to this headline">¶</a></h2>
<ol class="arabic simple">
<li><p>Creating a Package</p></li>
<li><p>Modifying the Package Configuration File (package.xml)</p></li>
<li><p>Modifying the Build Configuration File (CMakeLists.txt)</p></li>
<li><p>Writing Source Code</p></li>
<li><p>Building the Package</p></li>
<li><p>Running the Node</p></li>
</ol>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="createpackage.html" class="btn btn-neutral float-right" title="Tạo package" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="cacthuatngu.html" class="btn btn-neutral float-left" title="Các khái niệm quan trọng của ROS" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2019, TranChien

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>